extends loggedin-layout

block inner-content
  .row-fluid
    .span6.offset3.service-new
      h2 Update service
      form.form-horizontal(action='/main.html')
        .control-group
          label.control-label(for='service-name') Service Name
          .controls
            input(type='text',id='service-name',name='service-name',value='#{name}')
        .control-group
          label.control-label(for='service-authentication-type') Authentication Type
          .controls
            select.span6(id='service-authentication-type',name='authentication.type')
              if authentication.type !== 'basic' || authentication.type !== 'oauth'
                option(value='none',selected) No Authentication
              else
                option(value='none') No Authentication

              if authentication.type === 'basic'
                option(value='basic',selected) Basic Authentication
              else
                option(value='basic') Basic Authentication

              if authentication.type === 'oauth'
                option(value='oauth',selected) OAuth
              else
                option(value='oauth') OAuth
        if authentication.type !== 'none'
          .control-group.authentication-info.key-field(style='display:block;')
            label.control-label(for='service-key') Key
            .controls
              input(type='text',id='service-key',name='authentication.key',value='#{authentication.key}')
          .control-group.authentication-info.pass-field(style='display:block;')
            label.control-label(for='service-pass') Pass
            .controls
              input(type='password',id='service-pass',name='authentication.pass',value='#{authentication.pass}')
        else
          .control-group.authentication-info.key-field
            label.control-label(for='service-key') Key
            .controls
              input(type='text',id='service-key',name='authentication.key',value='#{authentication.key}')
          .control-group.authentication-info.pass-field
            label.control-label(for='service-pass') Pass
            .controls
              input(type='password',id='service-pass',name='authentication.pass',value='#{authentication.pass}')
        .control-group
          label.control-label(for='service-url') Target
          .controls
            input(type='text',id='service-url',name='target',value='#{target}')
        .control-group
          .controls
            input(type='hidden',id='service-enable',name='enable',value='#{enable}')
            input(type='hidden',id='service-id',name='id',value='#{_id}')
            input(type='hidden',id='csrf',name='_csrf',value='#{token}')
            ul
              li
                button.btn Update
              li
                button.btn.btn-danger#cancel Cancel

block script
  script(type='text/javascript')
    $(document).ready(function () {
      $('#service-authentication-type').select2();
      new UpdateServiceView;
    });
  
